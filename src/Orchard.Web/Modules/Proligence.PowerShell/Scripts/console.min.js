function LoadConsole(){function a(n){f.show();f.progressbar("value",100);s.text(l+" "+n);i.send({Command:n})}function y(n){return n?n.Output?n.Output:"":""}function v(t){if(t.Results&&t.Results.length!=0){u>=t.Results.length&&(u=0);var f=r.substring(0,t.ReplacementIndex),e=t.Results[u],i=t.ReplacementLength>0?r.substring(t.ReplacementIndex+t.ReplacementLength):"";n.promptText(f+e+i);n.moveCursor(i.length*-1);n.updatePromptDisplay();u++}}function p(i){var u=y(i),h=i.NewLine?!0:!1,r;if(o=i.Path?i.Path:"> ",u=u.replace(/[\r\n]+$/,"").replace(/(\r\n|\n|\r)/gm,"<br/>").replace(/\s/g,"&nbsp;"),i.Finished)t||e("",""),s.text(l),f.hide();else{if(!t&&e&&e("","jquery-console-message-value"),t=t?t:$(".jquery-console-message").last(),r=$("<span><\/span>").html(u).css("display","inline-block"),i.BackColor&&i.BackColor.toUpperCase()!="BLUE"&&r.css("background-color",i.BackColor),i.ForeColor)r.css("color",i.ForeColor);else switch(i.Type){case 1:r.addClass("jquery-console-message-warning");break;case 2:r.addClass("jquery-console-message-error");break;case 3:r.addClass("jquery-console-message-debug");break;case 4:r.addClass("jquery-console-message-verbose");break;default:r.addClass("jquery-console-message-value")}t.append(r);h&&t.append("<\/br>")}$(".jquery-console-prompt-label").last().text(o);n.scrollToBottom()}var u=0,r="",h,e,c=$('<div class="console">'),t,o,n=c.console({continuedPrompt:!0,promptLabel:function(){return o?o:"> "},commandValidate:function(){return!0},commandHandle:function(i,r){i.trim().toUpperCase()==="CLS"?n.reset():(t=null,e=r,a(i))},cancelHandle:function(){a("\x03")},completeHandle:function(t){return r.length==0?(r=t,i.send({Command:r,Position:n.cursorPosition(),Completion:!0})):v(h),""},cols:3,autofocus:!0,animateScroll:!0,promptHistory:!0,welcomeMessage:"Orchard PowerShell console\r\nType 'cls' to clear the console\r\n\r\n"}),f=$("#Progress"),s=$(".progress-label"),l=s.text(),i;f.progressbar({value:!1});n.typer.keydown(function(n){var t=n.keyCode;n.keyCode!=9&&(u=0,r="",h=null)});window.$Console=$("#Console");window.$Console.append(c);$("div.jquery-console-inner").css("background-color","#012456");i=$.connection("/conn/commandstream");window.$Console.data("connection",i);n.disableInput();i.logging=!0;i.start({waitForPageLoad:!0,transport:["serverSentEvents","foreverFrame","longPolling"]},function(){n.enableInput()});i.received(function(n){n.Type==6?(h=n.Data,v(n.Data)):n.Type==5?(f.progressbar("value",n.Data.percent),s.text(n.Data.activity+": "+n.Data.status)):p(n)})}$(function(){LoadConsole()});
/*
//# sourceMappingURL=console.min.js.map
*/