function LoadConsole(){function h(n){i.send({Command:n})}function l(n){return n?n.Output?n.Output:"":""}function c(t){if(t.Results&&t.Results.length!=0){u>=t.Results.length&&(u=0);var f=r.substring(0,t.ReplacementIndex),e=t.Results[u],i=t.ReplacementLength>0?r.substring(t.ReplacementIndex+t.ReplacementLength):"";n.promptText(f+e+i);n.moveCursor(i.length*-1);n.updatePromptDisplay();u++}}function a(i){var u=l(i),o=i.NewLine?!0:!1,r;if(e=i.Path?i.Path:"> ",u=u.replace(/[\r\n]+$/,"").replace(/(\r\n|\n|\r)/gm,"<br/>").replace(/\s/g,"&nbsp;"),i.Finished)t||f("","");else{if(!t&&f&&f("","jquery-console-message-value"),t=t?t:$(".jquery-console-message").last(),r=$("<span><\/span>").html(u).css("display","inline-block"),i.BackColor&&r.css("background-color",i.BackColor),i.ForeColor)r.css("color",i.ForeColor);else switch(i.Type){case 2:r.css("color","red");break;case 1:r.css("color","yellow");break;case 4:r.css("color","gray");break;default:r.css("color","white")}t.append(r);o&&t.append("<\/br>")}$(".jquery-console-prompt-label").last().text(e);n.scrollToBottom()}var u=0,r="",o,f,s=$('<div class="console">'),t,e,n=s.console({continuedPrompt:!0,promptLabel:function(){return e?e:"> "},commandValidate:function(){return!0},commandHandle:function(i,r){i.trim().toUpperCase()==="CLS"?n.reset():(t=null,f=r,h(i))},cancelHandle:function(){h("\x03")},completeHandle:function(t){return r.length==0?(r=t,i.send({Command:r,Position:n.cursorPosition(),Completion:!0})):c(o),""},cols:3,autofocus:!0,animateScroll:!0,promptHistory:!0,welcomeMessage:"Orchard PowerShell console\r\nType 'cls' to clear the console\r\n\r\n"}),i;n.typer.keydown(function(n){var t=n.keyCode;n.keyCode!=9&&(u=0,r="",o=null)});window.$Console=$("#Console");window.$Console.append(s);$("div.jquery-console-inner").css("background-color","#012456");i=$.connection("/conn/commandstream");window.$Console.data("connection",i);n.disableInput();i.logging=!0;i.start({waitForPageLoad:!0,transport:["serverSentEvents","foreverFrame","longPolling"]},function(){n.enableInput()});i.received(function(n){n.Type==6?(o=n.Data,c(n.Data)):a(n)})}$(function(){LoadConsole()});
/*
//# sourceMappingURL=console.min.js.map
*/